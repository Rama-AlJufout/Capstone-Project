{% extends 'base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/meals/meal.css' %}">
{% endblock %}

{% block content %}
<div class="meal-wrapper">
    <h2 class="meal-header">Your Meals</h2>

    {% if meals %}
    <div class="meal-cards">
        {% for meal in meals %}
        <div class="meal-card glass-card">
            <h3>{{ meal.get_meal_type_display }}</h3>
            <p><strong>Date:</strong> {{ meal.date }}</p>
            <p><strong>Food Items:</strong> {{ meal.food_items }}</p>
            <p><strong>Calories:</strong> {{ meal.calories }} cal</p>
            <div class="confirm-actions">
                <a href="{% url 'meal_update' meal.pk %}" class="edit-btn">Edit</a>
                <a href="#delete-{{ meal.pk }}" class="delete-btn">Delete</a>
            </div>
        </div>

        <!-- Confirm Delete Modal -->
        <div id="delete-{{ meal.pk }}" class="confirm-delete-container">
            <div class="confirm-card glass-card">
                <h2>Confirm Delete</h2>
                <p>Are you sure you want to delete this meal?</p>
                <div class="confirm-actions">
                    <form method="POST" action="{% url 'meal_delete' meal.pk %}">
                        {% csrf_token %}
                        <button type="submit" class="delete-btn">Yes, delete</button>
                    </form>
                    <a href="#" class="cancel-btn">Cancel</a>
                </div>
            </div>
        </div>

        {% endfor %}
    </div>
    {% else %}
    <p class="no-meals">No meals logged yet.</p>
    {% endif %}

    <div class="add-meal-container">
        <a href="{% url 'meal_create' %}" class="add-meal-btn">Add New Meal</a>
    </div>
</div>
{% endblock %}
