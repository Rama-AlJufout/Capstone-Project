{% extends 'base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/journal/journal.css' %}">
{% endblock %}

{% block content %}
<div class="journal-wrapper">

  <div class="journal-header">My Journal</div>

  <div class="journal-cards">
    {% if journals %}
      {% for entry in journals %}
      <div class="journal-card">
        <h3>{{ entry.mood|capfirst }}</h3>
        <p>{{ entry.note|linebreaksbr }}</p>
        <p><small>{{ entry.date }}</small></p>

        <!-- Edit/Delete Actions -->
        <div class="activity-actions">
          <a href="{% url 'journal_update' entry.id %}" class="edit-btn">Edit</a>
          <a href="#confirm-delete-{{ entry.id }}" class="delete-btn">Delete</a>
        </div>
      </div>

      <!-- Delete Confirmation Modal -->
      <div id="confirm-delete-{{ entry.id }}" class="confirm-delete-container">
        <div class="confirm-card">
          <h2>Confirm Delete</h2>
          <p>Are you sure you want to delete this journal entry?</p>
          <div class="confirm-actions">
            <form action="{% url 'journal_delete' entry.id %}" method="POST">
              {% csrf_token %}
              <button type="submit" class="delete-btn">Yes, Delete</button>
            </form>
            <a href="#" class="edit-btn">Cancel</a>
          </div>
        </div>
      </div>

      {% endfor %}
    {% else %}
      <!-- Create new card when no entries exist -->
      <div class="journal-card">
        <h3>No Entries Yet</h3>
        <p>Create your first journal entry by clicking below!</p>
        <div class="activity-actions">
          <a href="{% url 'journal_create' %}" class="edit-btn">+ Add New Entry</a>
        </div>
      </div>
    {% endif %}
  </div>

  {% if journals %}
  <!-- Always show Add New Entry button at the bottom -->
  <div style="width: 100%; max-width: 500px; margin: 0 auto; text-align: center;">
    <a href="{% url 'journal_create' %}" class="edit-btn add-journal-btn">+ Add New Entry</a>
  </div>
  {% endif %}

</div>
{% endblock %}
